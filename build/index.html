<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Docker Remote API Documentation</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://docker.com'>Docker</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="remote-api">Remote API</h1>

<p>Docker&rsquo;s Remote API uses an open schema model.  In this model, unknown 
properties in incoming messages are ignored. Client applications need to take
this behavior into account to ensure they do not break when talking to newer
Docker daemons.</p>

<p>The API tends to be REST, but for some complex commands, like attach or pull,
the HTTP connection is hijacked to transport STDOUT, STDIN, and STDERR.</p>

<p>By default the Docker daemon listens on <code class="prettyprint">unix:///var/run/docker.sock</code> and the
client must have <code class="prettyprint">root</code> access to interact with the daemon. If a group named
<code class="prettyprint">docker</code> exists on your system, <code class="prettyprint">docker</code> applies ownership of the socket to the
group.</p>

<p>The current version of the API is v1.21 which means calling <code class="prettyprint">/info</code> is the same
as calling <code class="prettyprint">/v1.21/info</code>. To call an older version of the API use
<code class="prettyprint">/v1.20/info</code>.</p>

<h2 id="authentication">Authentication</h2>

<p>Since API version 1.2, the auth configuration is now handled client side, so the
client has to send the <code class="prettyprint">authConfig</code> as a <code class="prettyprint">POST</code> in <code class="prettyprint">/images/(name)/push</code>. The
<code class="prettyprint">authConfig</code>, set as the <code class="prettyprint">X-Registry-Auth</code> header, is currently a Base64 encoded
(JSON) string with the following structure:</p>
<pre class="highlight json"><code><span class="p">{</span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w"> </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w"> </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"serveraddress"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w"> </span><span class="nt">"auth"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Callers should leave the <code class="prettyprint">auth</code> empty. The <code class="prettyprint">serveraddress</code> is a domain/ip
without protocol. Throughout this structure, double quotes are required.</p>

<h2 id="using-docker-machine-with-the-api">Using Docker Machine with the API</h2>

<p>If you are using <code class="prettyprint">docker-machine</code>, the Docker daemon is on a virtual host that uses an encrypted TCP socket. This means, for Docker Machine users, you need to add extra parameters to <code class="prettyprint">curl</code> or <code class="prettyprint">wget</code> when making test API requests, for example:</p>
<pre class="highlight plaintext"><code>curl --insecure --cert ~/.docker/cert.pem --key ~/.docker/key.pem https://YOUR_VM_IP:2376/images/json

wget --no-check-certificate --certificate=$DOCKER_CERT_PATH/cert.pem --private-key=$DOCKER_CERT_PATH/key.pem https://your_vm_ip:2376/images/json -O - -q
</code></pre>

<h2 id="docker-events">Docker Events</h2>

<p>The following diagram depicts the container states accessible through the API.</p>

<p><img alt="States" src="images/event_state.png" /></p>

<p>Some container-related events are not affected by container state, so they are not included in this diagram. These events are:</p>

<ul>
<li><strong>export</strong> emitted by <code class="prettyprint">docker export</code></li>
<li><strong>exec_create</strong> emitted by <code class="prettyprint">docker exec</code></li>
<li><strong>exec_start</strong> emitted by <code class="prettyprint">docker exec</code> after <strong>exec_create</strong></li>
</ul>

<p>Running <code class="prettyprint">docker rmi</code> emits an <strong>untag</strong> event when removing an image name.  The <code class="prettyprint">rmi</code> command may also emit <strong>delete</strong> events when images are deleted by ID directly or by deleting the last tag referring to the image.</p>

<blockquote>
<p><strong>Acknowledgement</strong>: This diagram and the accompanying text were used with the permission of Matt Good and Gilder Labs. See Matt&rsquo;s original blog post <a href="http://gliderlabs.com/blog/2015/04/14/docker-events-explained/">Docker Events Explained</a>.</p>
</blockquote>

<h2 id="version-history">Version history</h2>

<p>This section lists each version from latest to oldest.  Each listing includes a link to the full documentation set and the changes relevant in that release.</p>

<h3 id="v1-21-api-changes">v1.21 API changes</h3>

<p><a href="/reference/api/docker_remote_api_v1.21/">Remote API v1.21</a> documentation</p>

<ul>
<li><code class="prettyprint">GET /volumes</code> lists volumes from all volume drivers.</li>
<li><code class="prettyprint">POST /volumes</code> to create a volume.</li>
<li><code class="prettyprint">GET /volumes/(name)</code> get low-level information about a volume.</li>
<li><code class="prettyprint">DELETE /volumes/(name)</code>remove a volume with the specified name.</li>
</ul>

<h3 id="v1-20-api-changes">v1.20 API changes</h3>

<p><a href="/reference/api/docker_remote_api_v1.20/">Remote API v1.20</a> documentation</p>

<ul>
<li><code class="prettyprint">GET /containers/(id)/archive</code> get an archive of filesystem content from a container.</li>
<li><code class="prettyprint">PUT /containers/(id)/archive</code> upload an archive of content to be extracted to
an existing directory inside a container&rsquo;s filesystem.</li>
<li><code class="prettyprint">POST /containers/(id)/copy</code> is deprecated in favor of the above <code class="prettyprint">archive</code>
endpoint which can be used to download files and directories from a container.</li>
<li>The <code class="prettyprint">hostConfig</code> option now accepts the field <code class="prettyprint">GroupAdd</code>, which specifies a
list of additional groups that the container process will run as.</li>
</ul>

<h3 id="v1-19-api-changes">v1.19 API changes</h3>

<p><a href="/reference/api/docker_remote_api_v1.19/">Remote API v1.19</a> documentation</p>

<ul>
<li>When the daemon detects a version mismatch with the client, usually when
the client is newer than the daemon, an HTTP 400 is now returned instead
of a 404.</li>
<li><code class="prettyprint">GET /containers/(id)/stats</code> now accepts <code class="prettyprint">stream</code> bool to get only one set of stats and disconnect.</li>
<li><code class="prettyprint">GET /containers/(id)/logs</code> now accepts a <code class="prettyprint">since</code> timestamp parameter.</li>
<li><code class="prettyprint">GET /info</code> The fields <code class="prettyprint">Debug</code>, <code class="prettyprint">IPv4Forwarding</code>, <code class="prettyprint">MemoryLimit</code>, and
<code class="prettyprint">SwapLimit</code> are now returned as boolean instead of as an int. In addition, the
end point now returns the new boolean fields <code class="prettyprint">CpuCfsPeriod</code>, <code class="prettyprint">CpuCfsQuota</code>, and
<code class="prettyprint">OomKillDisable</code>.</li>
</ul>

<h3 id="v1-18-api-changes">v1.18 API changes</h3>

<p><a href="/reference/api/docker_remote_api_v1.18/">Remote API v1.18</a> documentation</p>

<ul>
<li><code class="prettyprint">GET /version</code> now returns <code class="prettyprint">Os</code>, <code class="prettyprint">Arch</code> and <code class="prettyprint">KernelVersion</code>.</li>
<li><code class="prettyprint">POST /containers/create</code> and <code class="prettyprint">POST /containers/(id)/start</code>allow you to  set ulimit settings for use in the container.</li>
<li><code class="prettyprint">GET /info</code> now returns <code class="prettyprint">SystemTime</code>, <code class="prettyprint">HttpProxy</code>,<code class="prettyprint">HttpsProxy</code> and <code class="prettyprint">NoProxy</code>.</li>
<li><code class="prettyprint">GET /images/json</code> added a <code class="prettyprint">RepoDigests</code> field to include image digest information.</li>
<li><code class="prettyprint">POST /build</code> can now set resource constraints for all containers created for the build.</li>
<li><code class="prettyprint">CgroupParent</code> can be passed in the host config to setup container cgroups under a specific cgroup.</li>
<li><code class="prettyprint">POST /build</code> closing the HTTP request cancels the build</li>
<li><code class="prettyprint">POST /containers/(id)/exec</code> includes <code class="prettyprint">Warnings</code> field to response.</li>
</ul>

<h3 id="v1-17-api-changes">v1.17 API changes</h3>

<p><a href="/reference/api/docker_remote_api_v1.17/">Remote API v1.17</a> documentation</p>

<ul>
<li>The build supports <code class="prettyprint">LABEL</code> command. Use this to add metadata to an image. For
example you could add data describing the content of an image. <code class="prettyprint">LABEL
&quot;com.example.vendor&quot;=&quot;ACME Incorporated&quot;</code></li>
<li><code class="prettyprint">POST /containers/(id)/attach</code> and <code class="prettyprint">POST /exec/(id)/start</code></li>
<li>The Docker client now hints potential proxies about connection hijacking using HTTP Upgrade headers.</li>
<li><code class="prettyprint">POST /containers/create</code> sets labels on container create describing the container.</li>
<li><code class="prettyprint">GET /containers/json</code> returns the labels associated with the containers (<code class="prettyprint">Labels</code>).</li>
<li><code class="prettyprint">GET /containers/(id)/json</code> returns the list current execs associated with the
container (<code class="prettyprint">ExecIDs</code>). This endpoint now returns the container labels
(<code class="prettyprint">Config.Labels</code>).</li>
<li><code class="prettyprint">POST /containers/(id)/rename</code> renames a container <code class="prettyprint">id</code> to a new name.* </li>
<li><code class="prettyprint">POST /containers/create</code> and <code class="prettyprint">POST /containers/(id)/start</code> callers can pass
<code class="prettyprint">ReadonlyRootfs</code> in the host config to mount the container&rsquo;s root filesystem as
read only.</li>
<li><code class="prettyprint">GET /containers/(id)/stats</code> returns a live stream of a container&rsquo;s resource usage statistics.</li>
<li><code class="prettyprint">GET /images/json</code> returns the labels associated with each image (<code class="prettyprint">Labels</code>).</li>
</ul>

<h3 id="v1-16-api-changes">v1.16 API changes</h3>

<p><a href="/reference/api/docker_remote_api_v1.16/">Remote API v1.16</a></p>

<ul>
<li><code class="prettyprint">GET /info</code> returns the number of CPUs available on the machine (<code class="prettyprint">NCPU</code>),
total memory available (<code class="prettyprint">MemTotal</code>), a user-friendly name describing the running Docker daemon (<code class="prettyprint">Name</code>), a unique ID identifying the daemon (<code class="prettyprint">ID</code>), and
a list of daemon labels (<code class="prettyprint">Labels</code>).</li>
<li><code class="prettyprint">POST /containers/create</code> callers can set the new container&rsquo;s MAC address explicitly.</li>
<li>Volumes are now initialized when the container is created.</li>
<li><code class="prettyprint">POST /containers/(id)/copy</code> copies data which is contained in a volume.</li>
</ul>

<h3 id="v1-15-api-changes">v1.15 API changes</h3>

<p><a href="/reference/api/docker_remote_api_v1.15/">Remote API v1.15</a> documentation</p>

<p><code class="prettyprint">POST /containers/create</code> you can set a container&rsquo;s <code class="prettyprint">HostConfig</code> when creating a
container. Previously this was only available when starting a container.</p>

<h3 id="v1-14-api-changes">v1.14 API changes</h3>

<p><a href="/reference/api/docker_remote_api_v1.14/">Remote API v1.14</a> documentation</p>

<ul>
<li><code class="prettyprint">DELETE /containers/(id)</code> when using <code class="prettyprint">force</code>, the container will be immediately killed with SIGKILL.</li>
<li><code class="prettyprint">POST /containers/(id)/start</code> the <code class="prettyprint">hostConfig</code> option accepts the field <code class="prettyprint">CapAdd</code>, which specifies a list of capabilities
to add, and the field <code class="prettyprint">CapDrop</code>, which specifies a list of capabilities to drop.</li>
<li><p><code class="prettyprint">POST /images/create</code> th <code class="prettyprint">fromImage</code> and <code class="prettyprint">repo</code> parameters supportthe
<code class="prettyprint">repo:tag</code> format. Consequently,  the <code class="prettyprint">tag</code> parameter is now obsolete. Using the
new format and the <code class="prettyprint">tag</code> parameter at the same time will return an error.</p>

<h1 id="remote-api-v1-21">Remote API v1.21</h1>

<h2 id="1-brief-introduction">1. Brief introduction</h2>

<ul>
<li>The Remote API has replaced <code class="prettyprint">rcli</code>.</li>
<li>The daemon listens on <code class="prettyprint">unix:///var/run/docker.sock</code> but you can
<a href="/articles/basics/#bind-docker-to-another-hostport-or-a-unix-socket">Bind Docker to another host/port or a Unix socket</a>.</li>
<li>The API tends to be REST. However, for some complex commands, like <code class="prettyprint">attach</code>
or <code class="prettyprint">pull</code>, the HTTP connection is hijacked to transport <code class="prettyprint">stdout</code>,
<code class="prettyprint">stdin</code> and <code class="prettyprint">stderr</code>.</li>
<li>When the client API version is newer than the daemon&rsquo;s, these calls return an HTTP
<code class="prettyprint">400 Bad Request</code> error message.</li>
</ul></li>
</ul>

<h1 id="endpoints">Endpoints</h1>

<h2 id="containers">Containers</h2>

<h3 id="list-containers">List containers</h3>

<p><code class="prettyprint">GET /containers/json</code></p>

<p>List containers</p>

<p><strong>Example request</strong>:
<code class="prettyprint">
    GET /containers/json?all=1&amp;before=8dfafdbc3a40&amp;size=1 HTTP/1.1
</code>
<strong>Example response</strong>:
&ldquo;`
    HTTP/1.1 200 OK
    Content-Type: application/json</p>

<p>[
         {
                 &quot;Id&rdquo;: &ldquo;8dfafdbc3a40&rdquo;,
                 &ldquo;Names&rdquo;:[&ldquo;/boring_feynman&rdquo;],
                 &ldquo;Image&rdquo;: &ldquo;ubuntu:latest&rdquo;,
                 &ldquo;Command&rdquo;: &ldquo;echo 1&rdquo;,
                 &ldquo;Created&rdquo;: 1367854155,
                 &ldquo;Status&rdquo;: &ldquo;Exit 0&rdquo;,
                 &ldquo;Ports&rdquo;: [{&ldquo;PrivatePort&rdquo;: 2222, &ldquo;PublicPort&rdquo;: 3333, &ldquo;Type&rdquo;: &ldquo;tcp&rdquo;}],
                 &ldquo;Labels&rdquo;: {
                         &ldquo;com.example.vendor&rdquo;: &ldquo;Acme&rdquo;,
                         &ldquo;com.example.license&rdquo;: &ldquo;GPL&rdquo;,
                         &ldquo;com.example.version&rdquo;: &ldquo;1.0&rdquo;
                 },
                 &ldquo;SizeRw&rdquo;: 12288,
                 &ldquo;SizeRootFs&rdquo;: 0
         },
         {
                 &ldquo;Id&rdquo;: &ldquo;9cd87474be90&rdquo;,
                 &ldquo;Names&rdquo;:[&ldquo;/coolName&rdquo;],
                 &ldquo;Image&rdquo;: &ldquo;ubuntu:latest&rdquo;,
                 &ldquo;Command&rdquo;: &ldquo;echo 222222&rdquo;,
                 &ldquo;Created&rdquo;: 1367854155,
                 &ldquo;Status&rdquo;: &ldquo;Exit 0&rdquo;,
                 &ldquo;Ports&rdquo;: [],
                 &ldquo;Labels&rdquo;: {},
                 &ldquo;SizeRw&rdquo;: 12288,
                 &ldquo;SizeRootFs&rdquo;: 0
         },
         {
                 &ldquo;Id&rdquo;: &ldquo;3176a2479c92&rdquo;,
                 &ldquo;Names&rdquo;:[&ldquo;/sleepy_dog&rdquo;],
                 &ldquo;Image&rdquo;: &ldquo;ubuntu:latest&rdquo;,
                 &ldquo;Command&rdquo;: &ldquo;echo 3333333333333333&rdquo;,
                 &ldquo;Created&rdquo;: 1367854154,
                 &ldquo;Status&rdquo;: &ldquo;Exit 0&rdquo;,
                 &ldquo;Ports&rdquo;:[],
                 &ldquo;Labels&rdquo;: {},
                 &ldquo;SizeRw&rdquo;:12288,
                 &ldquo;SizeRootFs&rdquo;:0
         },
         {
                 &ldquo;Id&rdquo;: &ldquo;4cb07b47f9fb&rdquo;,
                 &ldquo;Names&rdquo;:[&ldquo;/running_cat&rdquo;],
                 &ldquo;Image&rdquo;: &ldquo;ubuntu:latest&rdquo;,
                 &ldquo;Command&rdquo;: &ldquo;echo 444444444444444444444444444444444&rdquo;,
                 &ldquo;Created&rdquo;: 1367854152,
                 &ldquo;Status&rdquo;: &ldquo;Exit 0&rdquo;,
                 &ldquo;Ports&rdquo;: [],
                 &ldquo;Labels&rdquo;: {},
                 &ldquo;SizeRw&rdquo;: 12288,
                 &ldquo;SizeRootFs&rdquo;: 0
         }
    ]
&ldquo;`</p>

<p>Query Parameters:</p>

<ul>
<li>  <strong>all</strong> – 1/True/true or 0/False/false, Show all containers.
    Only running containers are shown by default (i.e., this defaults to false)</li>
<li>  <strong>limit</strong> – Show <code class="prettyprint">limit</code> last created
    containers, include non-running ones.</li>
<li>  <strong>since</strong> – Show only containers created since Id, include
    non-running ones.</li>
<li>  <strong>before</strong> – Show only containers created before Id, include
    non-running ones.</li>
<li>  <strong>size</strong> – 1/True/true or 0/False/false, Show the containers
    sizes</li>
<li>  <strong>filters</strong> - a JSON encoded value of the filters (a <code class="prettyprint">map[string][]string</code>) to process on the containers list. Available filters:

<ul>
<li>  <code class="prettyprint">exited=&lt;int&gt;</code>; &ndash; containers with exit code of  <code class="prettyprint">&lt;int&gt;</code> ;</li>
<li>  <code class="prettyprint">status=</code>(<code class="prettyprint">created</code>|<code class="prettyprint">restarting</code>|<code class="prettyprint">running</code>|<code class="prettyprint">paused</code>|<code class="prettyprint">exited</code>)</li>
<li>  <code class="prettyprint">label=key</code> or <code class="prettyprint">label=&quot;key=value&quot;</code> of a container label</li>
</ul></li>
</ul>

<p>Status Codes:</p>

<ul>
<li>  <strong>200</strong> – no error</li>
</ul>

          <h1 id="remote-api-v1-20-lynda">Remote API v1.20 LYNDA!!</h1>

<p>HELLOOOO</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
